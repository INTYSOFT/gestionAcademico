<div class="flex min-w-0 flex-auto flex-col">
    <div class="flex-auto p-6 sm:p-10">
        <section class="ciclos">
            <header class="ciclos__header">
                <mat-form-field appearance="outline" class="ciclos__search-field">
                    <mat-label>Buscar ciclo</mat-label>
                    <input
                        matInput
                        type="text"
                        placeholder="Buscar por nombre o fecha"
                        [formControl]="searchControl"
                        autocomplete="off" />
                    <button
                        mat-icon-button
                        matSuffix
                        type="button"
                        aria-label="Limpiar búsqueda"
                        *ngIf="searchControl.value"
                        (click)="searchControl.setValue('')">
                        <mat-icon>close</mat-icon>
                    </button>

                </mat-form-field>

                <mat-form-field appearance="outline" class="ciclos__year-field">
                    <mat-label>Año</mat-label>
                    <mat-select [formControl]="yearControl" disableOptionCentering>
                        <mat-option value="">Todos</mat-option>
                        <mat-option
                            *ngFor="let year of years$ | async"
                            [value]="year">
                            {{ year }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>

                <button
                    mat-raised-button
                    color="primary"
                    type="button"
                    class="ciclos__new-button"
                    (click)="createCiclo()"
                    [disabled]="isLoadingCiclos$ | async">
                    <mat-icon>add</mat-icon>
                    Nuevo ciclo
                </button>
            </header>

            <mat-progress-bar
                *ngIf="isLoadingCiclos$ | async"
                mode="indeterminate"
                color="primary"></mat-progress-bar>

            <ag-grid-angular
                class="ag-theme-material ciclos__grid"
                [theme]="'legacy'"
                [rowData]="ciclos$ | async"
                [columnDefs]="columnDefs"
                [defaultColDef]="defaultColDef"
                [animateRows]="true"
                [domLayout]="'autoHeight'"
                (gridReady)="onGridReady($event)"></ag-grid-angular>

            <p
                class="ciclos__empty"
                *ngIf="!(isLoadingCiclos$ | async) && !(ciclos$ | async)?.length">
                No se encontraron ciclos registrados.
            </p>
        </section>
    </div>
</div>
