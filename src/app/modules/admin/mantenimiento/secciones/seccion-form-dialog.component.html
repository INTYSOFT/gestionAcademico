<h2 mat-dialog-title>{{ data.seccion ? 'Editar secci贸n' : 'Registrar secci贸n' }}</h2>

@if (isSaving$ | async) {
  <mat-progress-bar
    mode="indeterminate"
  color="primary"></mat-progress-bar>
}

<mat-dialog-content>
  <form class="seccion-form-dialog__form" [formGroup]="form">
    <mat-form-field appearance="outline">
      <mat-label>Nombre</mat-label>
      <input
        matInput
        formControlName="nombre"
        maxlength="150"
        placeholder="Nombre de la secci贸n" />
        <mat-hint align="end">{{ form.get('nombre')?.value?.length || 0 }}/150</mat-hint>
        @if (form.get('nombre')?.hasError('required')) {
          <mat-error>
            El nombre es obligatorio.
          </mat-error>
        }
        @if (form.get('nombre')?.hasError('maxlength')) {
          <mat-error>
            El nombre no puede superar los 150 caracteres.
          </mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Capacidad</mat-label>
        <input
          matInput
          type="number"
          min="0"
          formControlName="capacidad"
          placeholder="Capacidad de la secci贸n" />
          @if (form.get('capacidad')?.hasError('required')) {
            <mat-error>
              La capacidad es obligatoria.
            </mat-error>
          }
          @if (form.get('capacidad')?.hasError('min')) {
            <mat-error>
              La capacidad no puede ser negativa.
            </mat-error>
          }
        </mat-form-field>

        <mat-slide-toggle formControlName="activo">Activo</mat-slide-toggle>
      </form>
    </mat-dialog-content>

    <mat-dialog-actions align="end">
      <button mat-button type="button" (click)="cancel()" [disabled]="isSaving$ | async">
        Cancelar
      </button>
      <button
        mat-flat-button
        color="primary"
        type="button"
        (click)="save()"
        [disabled]="form.invalid || (isSaving$ | async)">
        Guardar
      </button>
    </mat-dialog-actions>
