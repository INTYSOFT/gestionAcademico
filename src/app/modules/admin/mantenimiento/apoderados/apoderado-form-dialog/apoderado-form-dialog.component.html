<h2 mat-dialog-title>
    {{ data.apoderado ? 'Editar apoderado' : 'Registrar apoderado' }}
</h2>

<form
    class="apoderado-form"
    [formGroup]="form"
    (ngSubmit)="save()"
    novalidate
>
    <mat-dialog-content>
        <div class="apoderado-form__grid">
            <mat-form-field appearance="outline">
                <mat-label>DNI</mat-label>
                <input
                    matInput
                    formControlName="documento"
                    maxlength="12"
                    autocomplete="off"
                />
                <mat-error *ngIf="form.controls['documento'].hasError('required')">
                    El DNI es obligatorio
                </mat-error>
                <mat-error *ngIf="form.controls['documento'].hasError('minlength')">
                    Debe tener al menos 8 dígitos
                </mat-error>
                <mat-error *ngIf="form.controls['documento'].hasError('pattern')">
                    Solo se permiten números
                </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Apellidos</mat-label>
                <input
                    matInput
                    formControlName="apellidos"
                    maxlength="150"
                    autocomplete="off"
                />
                <mat-error *ngIf="form.controls['apellidos'].hasError('required')">
                    Los apellidos son obligatorios
                </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Nombres</mat-label>
                <input
                    matInput
                    formControlName="nombres"
                    maxlength="150"
                    autocomplete="off"
                />
                <mat-error *ngIf="form.controls['nombres'].hasError('required')">
                    Los nombres son obligatorios
                </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Celular</mat-label>
                <input
                    matInput
                    formControlName="celular"
                    maxlength="15"
                    autocomplete="off"
                />
                <mat-error *ngIf="form.controls['celular'].hasError('pattern')">
                    Ingrese un número de celular válido
                </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Correo electrónico</mat-label>
                <input
                    matInput
                    formControlName="correo"
                    maxlength="150"
                    autocomplete="off"
                    type="email"
                />
                <mat-error *ngIf="form.controls['correo'].hasError('email')">
                    Ingrese un correo válido
                </mat-error>
            </mat-form-field>

            <mat-checkbox formControlName="activo">
                Activo
            </mat-checkbox>
        </div>
    </mat-dialog-content>

    <mat-dialog-actions align="end">
        <button
            mat-button
            type="button"
            (click)="cancel()"
            [disabled]="isSaving$ | async"
        >
            Cancelar
        </button>
        <button
            mat-flat-button
            color="primary"
            type="submit"
            [disabled]="isSaving$ | async"
        >
            Guardar
        </button>
    </mat-dialog-actions>
</form>

<div class="apoderado-form__loading" *ngIf="isSaving$ | async">
    <mat-progress-spinner
        mode="indeterminate"
        diameter="48"
    ></mat-progress-spinner>
</div>
