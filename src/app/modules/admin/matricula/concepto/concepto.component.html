<div class="flex min-w-0 flex-auto flex-col">
  <div class="flex-auto p-6 sm:p-10">
    <section class="concepto">
      <header class="concepto__header">
        <div class="concepto__filters">
          <mat-form-field appearance="outline" class="concepto__search-field">
            <mat-label>Buscar conceptos</mat-label>
            <input
              matInput
              type="search"
              [formControl]="searchControl"
              placeholder="Nombre, tipo, precio o estado" />
            </mat-form-field>

            <mat-form-field appearance="outline" class="concepto__tipo-field">
              <mat-label>Tipo de concepto</mat-label>
              <mat-select [formControl]="tipoConceptoControl" disableOptionCentering>
                <mat-option [value]="null">Todos</mat-option>
                @for (tipo of conceptoTipos$ | async; track trackByConceptoTipo($index, tipo)) {
                  <mat-option
                    [value]="tipo.id">
                    {{ tipo.nombre }}
                  </mat-option>
                }
              </mat-select>
            </mat-form-field>
          </div>

          <button mat-raised-button color="primary" type="button" (click)="createConcepto()">
            <mat-icon>add</mat-icon>
            Nuevo concepto
          </button>
        </header>

        @if (isLoadingConceptos$ | async) {
          <mat-progress-bar
            mode="indeterminate"
          color="primary"></mat-progress-bar>
        }

        <ag-grid-angular
          class="ag-theme-material concepto__grid"
          [theme]="'legacy'"
          [rowData]="filteredConceptos$ | async"
          [columnDefs]="columnDefs"
          [defaultColDef]="defaultColDef"
          [animateRows]="true"
          [domLayout]="'autoHeight'"
        (gridReady)="onGridReady($event)"></ag-grid-angular>
      </section>
    </div>
  </div>
